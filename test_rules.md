# ğŸ§ª IBC Relayer æµ‹è¯•ä»»åŠ¡æ–‡æ¡£ï¼ˆé€‚ç”¨äº vota-bobtail æ¿€åŠ±æµ‹è¯•ç½‘ï¼‰

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡

1. éªŒè¯ validator æ˜¯å¦çœŸå®éƒ¨ç½²äº† IBC relayerã€‚
2. æ£€æŸ¥ relayer æ˜¯å¦ç›‘å¬å¹¶ä½¿ç”¨æŒ‡å®šçš„ channelã€‚
3. è¯„ä¼° relay æˆåŠŸç‡ã€å»¶è¿Ÿã€ç¨³å®šæ€§ç­‰æ€§èƒ½æŒ‡æ ‡ã€‚
4. ä¸ºæ¿€åŠ±å‘æ”¾æä¾›å®¢è§‚ã€å¯é‡åŒ–çš„æµ‹è¯•æ•°æ®æ”¯æŒã€‚

---

## ğŸ›  æ‰€éœ€æ¡ä»¶

- vota-bobtail é“¾æ­£å¸¸è¿è¡Œï¼Œä¸” RPC ä¸ LCD æ¥å£å¯è®¿é—®ã€‚
- è‡³å°‘ä¸€ä¸ª IBC channelï¼ˆå¦‚ `channel-0`ï¼‰ä¸ receiverChain-testnet å·²å»ºç«‹ã€‚
- validators å·²æäº¤æ„æ„¿å¹¶å£°ç§°å¯ä»¥æä¾› IBC relay æœåŠ¡ã€‚
- æœ‰ä¸€ä¸ªæµ‹è¯•é’±åŒ…åœ°å€ç”¨äºå‘èµ· IBC transferã€‚
- validators è¢«è¦æ±‚ relay çš„äº¤æ˜“ä¸­ä½¿ç”¨ `memo=relayed-by:<moniker>` è¿›è¡Œèº«ä»½æ ‡è¯†ã€‚

---

## ğŸ“‹ æµ‹è¯•æµç¨‹ï¼ˆæ¯æ—¥æˆ–æ¯å°æ—¶æ‰§è¡Œï¼‰

### Step 1ï¼šå‘èµ· IBC transfer æµ‹è¯•äº¤æ˜“

ä½¿ç”¨ vota-bobtail å‘ receiverChain-testnet å‘èµ· IBC è½¬è´¦äº¤æ˜“ï¼š

```bash
dorad tx ibc-transfer transfer transfer channel-0 <receiverChainæ¥æ”¶åœ°å€> 1stake \
  --from <æµ‹è¯•é’±åŒ…> \
  --chain-id vota-bobtail \
  --node https://vota-bobtail-rpc.dorafactory.org:443 \
  --gas auto \
  --gas-adjustment 1.3 \
  --memo "relay-test-$(date +%s)" \
  --yes
```

### Step 2ï¼šæ£€æŸ¥ ack æ˜¯å¦æ”¶åˆ°

ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥è¯¢ channel ä¸Šçš„ acknowledgementï¼š

```shell
dorad query ibc channel packet-acknowledgements transfer channel-0 \
  --chain-id vota-bobtail \
  --node https://vota-bobtail-rpc.dorafactory.org:443 \
  --output json
```

å¦‚æœæˆåŠŸæ”¶åˆ° ackï¼š

- è®°å½• ack æ”¶åˆ°æ—¶é—´ï¼›
- è®¡ç®—ä»å‘é€åˆ° ack çš„å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰ï¼›
- å»ç›®æ ‡é“¾ï¼ˆå¦‚ receiverChainï¼‰æŸ¥å¯¹åº”çš„æ¥æ”¶äº¤æ˜“ï¼›
- è·å– signer åœ°å€åŠ memo å†…å®¹ï¼Œç¡®è®¤æ˜¯å“ªä½ relayerã€‚

### Step 2.5ï¼šå¤„ç†å¼‚å¸¸æƒ…å†µ

- **è¶…æ—¶å¤„ç†**ï¼šå¦‚æœ 40 ç§’å†…æœªæ”¶åˆ° ackï¼Œæ ‡è®°ä¸ºè¶…æ—¶å¤±è´¥
- **äº¤æ˜“å¤±è´¥**ï¼šè®°å½•å…·ä½“å¤±è´¥åŸå› ï¼ˆgas ä¸è¶³ã€ä½™é¢ä¸è¶³ç­‰ï¼‰
- **Channel çŠ¶æ€æ£€æŸ¥**ï¼šæµ‹è¯•å‰ç¡®è®¤ channel çŠ¶æ€ä¸º OPEN
- **é‡è¯•æœºåˆ¶**ï¼šå¤±è´¥äº¤æ˜“æ˜¯å¦éœ€è¦é‡è¯•ï¼Œé‡è¯•å‡ æ¬¡

### Step 3ï¼šè®°å½•æ¯æ—¥ relay æµ‹è¯•æ—¥å¿—

å»ºè®®å°†æµ‹è¯•æ—¥å¿—ä»¥è¡¨æ ¼å½¢å¼å­˜å‚¨ï¼š

| å­—æ®µ            | è¯´æ˜                            |
| --------------- | ------------------------------- |
| æµ‹è¯•æ—¶é—´        | å‘èµ·äº¤æ˜“çš„æ—¶é—´æˆ³                |
| äº¤æ˜“ Hash       | vota-bobtail ä¸Šçš„äº¤æ˜“ hash      |
| Packet Sequence | IBC packet åºåˆ—å·               |
| æ˜¯å¦æˆåŠŸ        | true/false                      |
| å»¶è¿Ÿ(ç§’)        | ä»å‘é€åˆ°æ”¶åˆ° ack çš„æ—¶é—´         |
| ç›®æ ‡é“¾äº¤æ˜“ Hash | receiverChain ä¸Šçš„æ¥æ”¶äº¤æ˜“ hash |
| Relayer Signer  | å®é™… relay çš„åœ°å€               |
| Memo æ ‡è¯†       | memo ä¸­çš„ moniker               |
| é”™è¯¯ä¿¡æ¯        | å¤±è´¥æ—¶çš„å…·ä½“é”™è¯¯                |
| æ¥æ”¶é‡‘é¢        | éªŒè¯é‡‘é¢æ˜¯å¦æ­£ç¡®                |

### å‹åŠ›æµ‹è¯•

- **æ‰¹é‡æµ‹è¯•**ï¼šè¿ç»­å‘é€ 5-10 ç¬”äº¤æ˜“ï¼Œæµ‹è¯•å¹¶å‘å¤„ç†èƒ½åŠ›
- **ä¸åŒé‡‘é¢æµ‹è¯•**ï¼šæµ‹è¯•å°é¢(1stake)å’Œå¤§é¢(1000stake)çš„å¤„ç†å·®å¼‚
- **å³°å€¼æ—¶é—´æµ‹è¯•**ï¼šåœ¨ç½‘ç»œç¹å¿™æ—¶æ®µè¿›è¡Œæµ‹è¯•

### ç¨³å®šæ€§æµ‹è¯•

- **24 å°æ—¶è¿ç»­æµ‹è¯•**ï¼šæ¯å°æ—¶å‘èµ·ä¸€æ¬¡ï¼Œæµ‹è¯•é•¿æœŸç¨³å®šæ€§
- **ç½‘ç»œæ³¢åŠ¨æµ‹è¯•**ï¼šåœ¨ç½‘ç»œæ¡ä»¶è¾ƒå·®æ—¶çš„è¡¨ç°

### èº«ä»½éªŒè¯

- **Moniker æ˜ å°„éªŒè¯**ï¼šç¡®è®¤ memo ä¸­çš„ moniker ç¡®å®å¯¹åº”è¯¥ validator
- **Signer åœ°å€éªŒè¯**ï¼šéªŒè¯ relayer åœ°å€æ˜¯å¦åœ¨ validator çš„æˆæƒåˆ—è¡¨ä¸­
- **éšæœºæµ‹è¯•æ—¶é—´**ï¼šé¿å… validator åªåœ¨ç‰¹å®šæ—¶é—´å¼€å¯ relayer
